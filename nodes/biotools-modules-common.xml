<?xml version="1.0" standalone="no"?>

<kickstart>

<description>
BIOTOOLS
blat - http://genome.ucsc.edu
bowtie - http://bowtie-bio.sourceforge.net
bwa - http://bio-bwa.sourceforge.net
GenomeAnalysisTK - http://www.broadinstitute.org/gsa/wiki/index.php/The_Genome_Analysis_Toolkit
samtools - http://samtools.sourceforge.net
velvet - http://www.ebi.ac.uk/~zerbino/velvet/
soapdenovo - http://soap.genomics.org.cn/soapdenovo.html
</description>

<copyright>
Copyright (c) 2000 - 2011 The Regents of the University of California.
All rights reserved. Rocks(r) v5.1 www.rocksclusters.org

Copyright (C) 2007 Free Software Foundation, Inc. fsf.org
 Everyone is permitted to copy and distribute verbatim copies
 of this license document, but changing it is not allowed.

Copyright Â© 2007,2008-2010 Beijing Genomics Institute
</copyright>

<changelog>
</changelog>

<post>

# Remove /etc/profile.d files in favor of loadable modules when available

if test `grep -c /opt/modulefiles/applications /etc/profile.d/modules.csh` = 0; then
  echo 'setenv MODULEPATH /opt/modulefiles/applications:$MODULEPATH' >> \
       /etc/profile.d/modules.csh
fi
if test `grep -c /opt/modulefiles/applications /etc/profile.d/modules.sh` = 0; then
  echo 'export MODULEPATH=/opt/modulefiles/applications:$MODULEPATH' >> \
       /etc/profile.d/modules.sh
fi

if test -f /etc/profile.d/biotools.sh; then

  /bin/rm -f /etc/profile.d/biotools.*
  /bin/mkdir -m 0755 -p /opt/modulefiles/applications/biotools

<file name="/opt/modulefiles/applications/biotools/1" perms="0644">
#%Module1.0

set biotoolsHome /opt/biotools

set packageHome $biotoolsHome/blat
setenv BLATHOME $packageHome
prepend-path PATH $packageHome/bin/x86_64

set packageHome $biotoolsHome/bowtie
setenv BOWTIEHOME $packageHome
prepend-path PATH $packageHome/bin
prepend-path PATH $packageHome/scripts

set packageHome /opt/biotools/bwa
setenv BWAHOME $packageHome
prepend-path PATH $packageHome/bin

set packageHome /opt/biotools/GenomeAnalysisTK
setenv GATKHOME $packageHome
prepend-path CLASSPATH $packageHome

set packageHome /opt/biotools/samtools
setenv SAMTOOLSHOME $packageHome
prepend-path PATH $packageHome/bin

prepend-path /opt/biotools/velvet/bin
prepend-path /opt/biotools/soapdenovo/bin

</file>
<file name="/opt/modulefiles/applications/biotools/.version.1">
#%Module1.0
set ModulesVersion "1"
</file>
/bin/ln -s /opt/modulefiles/applications/biotools/.version.1 \
           /opt/modulefiles/applications/biotools/.version
fi

</post>

</kickstart>
